{% extends 'base.html.twig' %}

{% block content %}

<section id="section-body">

    <div class="container">
        <div class="page-title">
            <div class="row">
                <div class="col-sm-12">
                    <div class="page-title-left">
                        <h2>Mon profil</h2>
                    </div>
                    <div class="page-title-right">
                        <ol class="breadcrumb"><li><a href="/"><i class="fa fa-home"></i></a></li><li class="active">Mon profil</li></ol>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-3 col-sm-4 user-dashboard-left">
                <div class="my-sidebar">
                    <ul class="list-unstyled my-menu">
                        <li class="active"> <a href="#"> <i class="fa fa-user"></i> Mon profil </a></li>
                        <li> <a href="my-properties.html"> <i class="fa fa-building"></i> Mes propriétés </a></li>
                        <li> <a href="{{ path('annonce_new') }}"> <i class="fa fa-plus-circle"></i> Ajouter une nouvelle propriété </a></li>
                        <li> <a href="my-favorite-properties.html"> <i class="fa fa-heart"></i> Propriétés favorites </a></li>
                        <li> <a href="#"> <i class="fa fa-unlock"></i> Se déconnecter </a></li>
                    </ul>
                </div>
            </div>
            <div class="col-md-9 col-sm-8 user-dashboard-right">
                <div class="profile-area account-block white-block">
                    {{ form_start(edit_form) }}
                        <div class="row">
                            <div class="col-md-4 col-sm-5">
                                {% if profile.nom %}
                                    <h4>Bienvenue, {{ profile.nom  }}!</h4>
                                {% else %}
                                    <h4>Bienvenue, {{ user.username }}!</h4>
                                {% endif %}
                                <div class="my-avatar">
                                    {% if profile.avatar %}
                                        <img src="{{ asset('uploads/avatars/'~profile.avatar) }}" alt="Avatar">
                                    {% elseif profile.avatarUrlFb %}
                                        <img src="{{ profile.avatarUrlFb }}" alt="Avatar">
                                    {%  else %}
                                        <img src="http://placehold.it/50x50" alt="Avatar">
                                    {% endif %}
                                    <label class="btn btn-default btn-file">
                                        Importez image {{ form_widget(edit_form.avatarFile, {'attr':{'class':'btn btn-primary btn-block'} } ) }}
                                    </label>
                                </div>
                            </div>
                            <div class="col-md-8 col-sm-7">
                                <h4>Information</h4>
                                <div class="row">
                                    <div class="col-sm-6">
                                        <div class="form-group">
                                            <label for="firstname">Nom</label>
                                            {{ form_widget(edit_form.nom) }}
                                        </div>
                                    </div>
                                    <div class="col-sm-6">
                                        <div class="form-group">

                                            <label for="lastname">Prénom</label>
                                            {{ form_widget(edit_form.prenom) }}
                                        </div>
                                    </div>
                                    <div class="col-sm-6">
                                        <div class="form-group">
                                            <label for="email">Telephone</label>
                                            {{ form_widget(edit_form.telephone) }}
                                        </div>
                                    </div>
                                    <div class="col-sm-12">
                                        <div class="form-group">
                                            <label for="about">À propos de moi</label>
                                            {{ form_widget(edit_form.bio) }}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <hr>
                        <div class="row">
                            <div class="col-sm-12 col-xs-12">
                                <h4>Des médias sociaux</h4>
                            </div>
                            <div class="col-sm-4">
                                <div class="form-group">
                                    <label for="facebook">Facebook URL</label>
                                    {{ form_widget(edit_form.facebookId) }}
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <div class="form-group">
                                    <label for="linkdin">Linkdin URL</label>
                                    {{ form_widget(edit_form.linkedinId) }}
                                </div>
                            </div>
                            <div class="col-sm-12 col-xs-12 text-right">
                                <button type="submit" class="btn btn-primary">Enregistrer</button>
                            </div>
                        </div>
                    {{ form_end(edit_form) }}
                </div>
                {% if not profile.isSigninWithFb %}
                <div class="profile-area account-block white-block">
                    <h4>Changer votre mots de passe</h4>
                    {{ form_start(changePassword_form) }}
                        <div class="error">
                            <p class="error">{{ form_errors(changePassword_form.oldPassword) }}</p>
                            <p class="error">{{ form_errors(changePassword_form.password.first) }}</p>
                            <p class="error">{{ form_errors(changePassword_form.password.second) }}</p>

                        </div>
                        <div class="row">
                            <div class="col-sm-4">
                                <div class="form-group">
                                    <label for="oldpass">Ancien mots de passe</label>
                                    {{ form_widget(changePassword_form.oldPassword) }}
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <div class="form-group">
                                    <label for="newpass">Nouveau mots de passe</label>
                                    {{ form_widget(changePassword_form.password.first) }}
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <div class="form-group">
                                    <label for="confirmpass">Confirm password</label>
                                    {{ form_widget(changePassword_form.password.second) }}
                                </div>
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary">Mettre à jour le mot de passe</button>
                    {{ form_end(changePassword_form) }}
                </div>
                {% endif %}
            </div>
        </div>
    </div>

</section>
{% endblock %}

